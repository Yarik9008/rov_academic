# ROV Gripper - Конфигурация для CH32V003F4U6

## Установка платформы CH32V003F4U6

Для работы с микроконтроллером CH32V003F4U6 необходимо установить специальную платформу PlatformIO.

### Шаг 1: Установка платформы

Выполните одну из следующих команд в терминале:

```bash
# Вариант 1: Установка через официальный репозиторий
pio platform install https://github.com/Community-Packages/platform-ch32v.git

# Вариант 2: Если первый не работает, попробуйте альтернативный
pio platform install https://github.com/OpenEulerEmbedded/platform-ch32v.git

# Вариант 3: Установка через Registry
pio platform install ch32v
```

### Шаг 2: Проверка установки

```bash
# Проверить доступные платы
pio boards ch32v

# Проверить установленные платформы
pio platform list
```

### Шаг 3: Компиляция проекта

```bash
# Компиляция для CH32V003F4U6
pio run -e ch32v003f4u6

# Прошивка через WCH-Link
pio run -e ch32v003f4u6 -t upload

# Мониторинг Serial
pio device monitor
```

## Особенности CH32V003F4U6

### Технические характеристики:
- **Архитектура**: RISC-V 32-bit
- **Частота**: 48 МГц
- **Память**: 16KB Flash, 2KB RAM
- **Интерфейсы**: UART, I2C, SPI, ADC, Timer
- **Прошивка**: Через WCH-Link

### Подключение WCH-Link:
- **VCC** → 3.3V
- **GND** → GND  
- **SWDIO** → PA13
- **SWCLK** → PA14
- **NRST** → NRST (опционально)

### Особенности конфигурации:
- Используется флаг `SYSCLK_FREQ_48MHZ_HSI=48000000` для освобождения пинов PA1 и PA2
- Автоматическое определение микроконтроллера через `#ifdef CH32V003`
- Совместимость с библиотекой Adafruit INA219

## Альтернативные варианты

Если установка платформы CH32V не удается, можно:

1. **Использовать STM32G030F6P6** (уже настроен и работает)
2. **Создать кастомную платформу** на основе generic
3. **Использовать официальную IDE WCH** (MounRiver Studio)

## Поддержка

При возникновении проблем с CH32V003F4U6:
1. Проверьте подключение WCH-Link
2. Убедитесь в правильности установки драйверов
3. Попробуйте альтернативные репозитории платформы
4. Используйте STM32G030F6P6 как альтернативу

